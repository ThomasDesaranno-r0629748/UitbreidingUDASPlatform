<html>

<head>
    <title>A Leaflet map!</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <style>
        #map {
            height: 100%
        }
    </style>
</head>

<body>

    <div id="map"></div>

    <script>
        // initialize the map
        var map = L.map('map').setView([50.8798438, 4.7005176], 13);

        // load a tile layer
        var Wikimedia = L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png', {
            attribution: '<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',
            minZoom: 1,
            maxZoom: 19
        }).addTo(map);

        function colorPick(temperature) {
            if (temperature < 10) return 'blue';
            if (temperature >= 10 && temperature <= 12) return 'yellow';
            if (temperature > 12 && temperature < 15) return 'orange';
            if (temperature > 15) return 'red';
        }

        d3.json("lastMesuraments.json", function (data) {
            data.forEach(function (d) {
                console.log(d.id);
                d.lat = +d.lat;
                d.lon = +d.lon;
                console.log(d.lat);
                console.log(d.lon);
                //L.marker([d.lat, d.lon], {icon: greenIcon}).addTo(mymap);
                var circle = L.circle([d.lat, d.lon], {
                    color: colorPick(d.temperature),
                    fillColor: colorPick(d.temperature),
                    fillOpacity: 0.7,
                    radius: 120,
                    stroke: false
                }).addTo(map);
                circle.bindPopup("temperature:" + d.temperature + "Â°C");
            });

        })
        var popup = L.po
        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        map.on('click', onMapClick);
    </script>
</body>

</html>